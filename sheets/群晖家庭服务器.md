---
tags: [web,群晖]
---

首先确保自己对每个环节的设备都拥有绝对控制权，在常见的家庭网络环节下，

网络从运营商总部接入小区/园区的控制中心，由控制中心完成基本过滤
用户通过光猫完成光电转换，完成与互联网的信息交换
用户通过路由器链接光猫，完成内网与外网的信息交换
用户通过交换机链接路由器，完成内网设备间的信息交换（中型公司会有）
用户将购买的服务器连接到交换机/路由器，最后一步信息交换

你可能会遇到如下问题：

1.你所居住的小区/园区存在网络控制中心，限制家庭宽带的使用，例如我园区的网络控制中心：限制端口，限制设备数量，限制设备类。可以通过打电话沟通与钞能力解决。

2.运营商提供的设备，例如：光猫，路由器，存在限制，例如我司的光猫仅开启上网功能，不允许端口对外开放，不允许端口映射。可以通过打电话沟通与钞能力解决。

3.路由器、服务器不提供端口映射、仅暴露指定端口。我用的是华为+群晖，总价4K。

那么如果你的服务比较复杂，譬如我司曾经采购一个很古老的系统，我不负责迭代它，但需要维护他，那么打包成一个容器很显然是个不错的主意。

由于群晖有很多版本，路由器也有很多版本，我这里只是提供一个思路，不保证一定能成功。

## 群晖

在群晖套件中心找到 Container Manager

下载宝塔镜像 btpanel-baota

映射端口前请确认端口没有在使用，可以通过群晖官网查询

推荐端口号在4000-5000之间，因为这个端的端口未被使用。

映射需要用到的端口与需要挂载的文件夹

关于映射：如果你把宝塔的登录端口8888映射为群晖服务器的4444，那么此时你就可以通过群晖的4444端口访问宝塔了。

## 路由器

开启设备映射，将群晖设为固定的IP地址，将群晖的端口映射到路由器的端口。

如果你把群晖的4444端口映射为80，并且把域名绑定到公网IP上时

那么当你访问这个域名会跳转到路由器80端口，再跳到群晖的4444端口，再跳到群晖宝塔容器的8888端口。