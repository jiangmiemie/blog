
# 第三方模块的使用

第三方模块使用的基本流程 以opencv为例
 
- 下载 pip install opencv-python
- 导入 import cv2
- 使用 模块名.方法名 示例 ： cv2.imread('./img/cat.jpg')

对于复杂的模块来说，使用help()方法、dir()方法不能很好的满足我们的需求。如果是新手需要搭配官方文档，查阅使用实例。


这里需要注意的是：opencv模块的下载名、导入名均不是opencv。

事实上模块名、下载名与导入名也并非一种强制的规则。


建议在下载模块之前先通过搜索引擎搜索。


更多是后续的开发者出于习惯会将名称统一。例子是pandas模块。

- 下载 pip install pandas
- 导入 import pandas
- 使用 模块名.方法名 示例 ： pandas.read_csv("./cat.csv")


第三方模块与系统模块一样，都是自定义好的一系列模块，这些模块也自然存在一些版本差异。

在使用的过程之中很可能因为版本的不匹配、方法的弃用导致示例的代码失效。

我们可以通过2个方式来解决：

1.升级至最新版本或安装指定的版本

- 安装指定的版本示例: pip install pandas==2.0.2
- 升级至最新版本示例: pip install --upgrade pandas

2.积极的查询官方文档。可在 https://pypi.org/ 上搜索对应模块，知名度较高的模块都会有系统的官方文档。

方法1事实上是一种暂时性解决办法，通常用于在特定时间内完成特定任务，或此模块只是作为辅助模块使用时。

如果我们的程序高度依赖某个模块，建议通过官网文档详细了解前因后果。

一个具体的实例是：在机器学习的过程往往被拆分为：数据读取、数据处理、数据建模、模型输出。

数据读取、数据处理由openpyxl模块完成，如果它异常，不需要纠结原理。更换版本或更换其他数据读取模块即可如（xlrd、pandas）。

数据建模、模型输出由scikit-learn模块完成，如果它异常建议查阅官方文档明确知晓具体原因。


# OpenCV 读取、缩放、翻转、写入图像


```python 
# 导入必要的包
import numpy as np
import matplotlib.pyplot as plt
%matplotlib inline
# 导入opencv
import cv2

# 使用opencv的imread方法，打开图片
img = cv2.imread('./img/cat.jpg')
# 检查类型，会发现自动转成了Numpy 数组的形式
type(img)
img
```


```python 
# 如果打开一张不存在的图片，不会报错，但是会返回空类型
img_wrong = cv2.imread('./img/wrong.jpg')
type(img_wrong)
img_wrong
```


```python 
plt.imshow(img)
# 为什么会显示的这么奇怪？
```


```python 
# （OpenCV和matplotlib 默认的RBG顺序不一样）
# matplotlib: R G B
# opencv: B G R
# 需要调整顺序

# 将OpenCV BGR 转换成RGB，cv2.COLOR_可以看到更多转换形式
img_fixed = cv2.cvtColor(img,cv2.COLOR_BGR2RGB)

# 算法参考：RGB取均值、RGB按阈值取值、按色彩心理学公式取值R*0.299 + G*0.587 + B*0.114 = Gray

plt.imshow(img_fixed)
# 显示正常了
```


```python 
# 另外，我们再读取图片时也可以以灰度模式读取
img_gray = cv2.imread('./img/cat.jpg',cv2.IMREAD_GRAYSCALE)
# 显示这个灰度图
plt.imshow(img_gray,cmap="gray")
```


```python 
# 使用resize缩放（打开函数帮助）
img_resize = cv2.resize(img_fixed,(1000,300))
# 显示缩放后的图片
plt.imshow(img_resize)
```


```python 
# 翻转图片：0表示垂直翻转、1表示水平翻转，-1表示水平垂直都翻转
img_flip = cv2.flip(img_fixed,-1)
```


```python 
plt.imshow(img_flip)
```

