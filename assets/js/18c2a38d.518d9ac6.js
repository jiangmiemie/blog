"use strict";(self.webpackChunkjiangmiemie=self.webpackChunkjiangmiemie||[]).push([[6637],{69237:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>l,metadata:()=>o,toc:()=>i});var t=a(85893),s=a(11151);const l={sidebar_position:2,title:"\u5173\u7cfb\u578b\u6570\u636e\u5e93"},r=void 0,o={id:"\u4e0d\u540c\u7684\u6570\u636e\u5e93/\u5173\u7cfb\u578b\u6570\u636e\u5e93",title:"\u5173\u7cfb\u578b\u6570\u636e\u5e93",description:"\u5173\u7cfb\u578b\u6570\u636e\u5e93(MySQL)",source:"@site/docs/docs/\u4e0d\u540c\u7684\u6570\u636e\u5e93/\u5173\u7cfb\u578b\u6570\u636e\u5e93.md",sourceDirName:"\u4e0d\u540c\u7684\u6570\u636e\u5e93",slug:"/\u4e0d\u540c\u7684\u6570\u636e\u5e93/\u5173\u7cfb\u578b\u6570\u636e\u5e93",permalink:"/docs/\u4e0d\u540c\u7684\u6570\u636e\u5e93/\u5173\u7cfb\u578b\u6570\u636e\u5e93",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"\u5173\u7cfb\u578b\u6570\u636e\u5e93"},sidebar:"tutorialSidebar",previous:{title:"\u4e0d\u540c\u7684\u6570\u636e\u5e93",permalink:"/docs/\u4e0d\u540c\u7684\u6570\u636e\u5e93/"},next:{title:"\u5185\u5b58\u6570\u636e\u5e93",permalink:"/docs/\u4e0d\u540c\u7684\u6570\u636e\u5e93/\u5185\u5b58\u6570\u636e\u5e93"}},c={},i=[{value:"\u5173\u7cfb\u578b\u6570\u636e\u5e93(MySQL)",id:"\u5173\u7cfb\u578b\u6570\u636e\u5e93mysql",level:2},{value:"\u9488\u5bf9 databases \u7684\u589e\u5220\u6539\u67e5",id:"\u9488\u5bf9-databases-\u7684\u589e\u5220\u6539\u67e5",level:3},{value:"\u9488\u5bf9 table \u7684\u589e\u5220\u6539\u67e5",id:"\u9488\u5bf9-table-\u7684\u589e\u5220\u6539\u67e5",level:3},{value:"\u9488\u5bf9\u5217\u7684\u589e\u5220\u6539\u67e5",id:"\u9488\u5bf9\u5217\u7684\u589e\u5220\u6539\u67e5",level:3},{value:"\u9488\u5bf9\u884c\u7684\u589e\u6539\u67e5",id:"\u9488\u5bf9\u884c\u7684\u589e\u6539\u67e5",level:3},{value:"PostgreSQL",id:"postgresql",level:2},{value:"\u57fa\u672c\u7528\u6cd5",id:"\u57fa\u672c\u7528\u6cd5",level:3},{value:"\u4ee3\u7801\u5b9e\u4f8b",id:"\u4ee3\u7801\u5b9e\u4f8b",level:3}];function m(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"\u5173\u7cfb\u578b\u6570\u636e\u5e93mysql",children:"\u5173\u7cfb\u578b\u6570\u636e\u5e93(MySQL)"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://dev.mysql.com/",children:"mysql \u5b98\u7f51"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://edu.aliyun.com/lesson_153_1911?spm=5176.10731542.0.0.7a7250d7QVLjmc#_1911",children:"\u963f\u91cc\u4e91 SQL \u5165\u95e8"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://www.runoob.com/python/python-mysql.html",children:"\u83dc\u9e1f\u6559\u7a0b python \u4e0e sql"})}),"\n",(0,t.jsx)(n.p,{children:"\u6ce8\u610f\uff1a\u3010\u6570\u636e\u5e93\u3011\u5728\u4e0d\u540c\u7684\u8bed\u5883\u4e0b\u4ee3\u8868\u7684\u542b\u4e49\u662f\u4e0d\u540c\u7684\n\u6570\u636e\u5e93 = N \u4e2a table\ntable = \u8868\u7ed3\u6784+\u8868\u8bb0\u5f55"}),"\n",(0,t.jsx)(n.h3,{id:"\u9488\u5bf9-databases-\u7684\u589e\u5220\u6539\u67e5",children:"\u9488\u5bf9 databases \u7684\u589e\u5220\u6539\u67e5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:"showLineNumbers",children:"\nmysql -u root -p #\u94fe\u63a5root\u7528\u6237\u81f3\u670d\u52a1\u5668\n\ncreate user username identified by 'password'; \u589e\u52a0\u7528\u6237\ncreate user testuser identified by 'test123'; \u793a\u4f8b1\n\nuse mysql;# \u4f7f\u7528mysql \u6570\u636e\u5e93\nupdate user set host='%' where user='testuser';# \u6307\u5b9a\u7528\u6237\u7684\u6388\u6743\ngrant all privileges on *.* to testuser@'%';# \u6307\u5b9a\u7528\u6237\u7684\u6388\u6743\nshow grants for 'testuser';#\u67e5\u770b\u6743\u9650\n\nshow databases;#\u67e5\u770b\u6570\u636e\u5e93\u3010databases\u590d\u6570\u3011\ncreate database name; #\u521b\u5efa\u540d\u4e3aname\u7684\u6570\u636e\u5e93\ndrop database name; #\u5220\u9664\u540d\u4e3aname\u7684\u6570\u636e\u5e93\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u9488\u5bf9-table-\u7684\u589e\u5220\u6539\u67e5",children:"\u9488\u5bf9 table \u7684\u589e\u5220\u6539\u67e5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:"showLineNumbers",children:"#\u521b\u5efa\nuse name #\u9009\u4e2dname\u6570\u636e\u5e93\ncreate table tablename(\nid bigint(20),\nip varchar(255)\n); #\u521b\u5efa\u540d\u4e3atablename\u7684\u8868\u5355\n\n#\u5220\u9664\ncreate table tablename #\u5220\u9664\u4e00\u4e2atable\n\n#\u4fee\u6539\nalter table [tablename] rename [newname]#\u4fee\u6539table\u540d\n\nshow tables;#\u663e\u793a\u5f53\u524d\u6570\u636e\u5e93\u6240\u6709\u8868\u5355\ndescribe tablename ;#\u67e5\u8be2\u8868\u7ed3\u6784\nselect * from tablename ;#\u67e5\u8be2\u8868\u6570\u636e\nselect colnamel,colname2 from tablename;#\u67e5\u8be2\u8868\u7684\u6307\u5b9a\u5217\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u9488\u5bf9\u5217\u7684\u589e\u5220\u6539\u67e5",children:"\u9488\u5bf9\u5217\u7684\u589e\u5220\u6539\u67e5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:"showLineNumbers",children:"#\u589e\u52a0\nalter table [tablename] add [c1] [datatype][no null][default];#\u589e\u52a0\u8868\u7684\u5217\nalter table tablename add c1 int(11) null; #\u793a\u4f8b1\nalter table tablename add c2 int(11) not null default 1;#\u793a\u4f8b2\n\n#\u5220\u9664\nalter table [tablename] drop [c1];#\u5220\u9664\u8868\u7684\u5217\n\n#\u4fee\u6539\nalter table [tablename] change [oldcloumname][newcloumname][datatype];#\u4fee\u6539\u5217\u7684\u4fe1\u606f\nalter table tablename change c1 c100 int(11);#\u793a\u4f8b1\nalter table tablename change c1 c1 varchar(255);#\u793a\u4f8b2\n\n#\u67e5\u8be2\ndescribe tablename ;#\u67e5\u8be2\u8868\u7ed3\u6784\nselect * from tablename ;#\u67e5\u8be2\u8868\u6570\u636e\nselect colnamel from tablename;         #\u67e5\u8be2\u8868\u7684\u6307\u5b9a\u5355\u5217\nselect colnamel,colname2 from tablename;#\u67e5\u8be2\u8868\u7684\u6307\u5b9a\u591a\u5217\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u9488\u5bf9\u884c\u7684\u589e\u6539\u67e5",children:"\u9488\u5bf9\u884c\u7684\u589e\u6539\u67e5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:"showLineNumbers",children:"#\u63d2\u5165\ninsert into\u3010table name\u3011 values(\u503c1,\u503c2,\u503c3);#\u63d2\u5165\u6570\u636e\u6570\u91cf\u5fc5\u987b\u548c\u5217\u6570\u4e00\u81f4\ninsert into employee values(1,1,1,1,1);#\u793a\u4f8b1\ninsert into\u3010table name\u3011(\u52171,\u52172) values(\u503c1,\u503c2\uff09#\u6570\u636e\u63d2\u5165\u6307\u5b9a\u5217\n\n#\u63d2\u5165\u547d\u4ee4insert\u548c\u67e5\u8be2\u547d\u4ee4select\u7684\u7ec4\u5408\u4f7f\u7528\u3010\u63d2\u5165\u4e0e\u88ab\u63d2\u5165\u7684\u6570\u636e\u7c7b\u578b\u9700\u4e00\u81f4\u3011\ninsert into\u3010\u88ab\u63d2\u5165\u8868\u540d\u3011select *from \u3010table name\u3011[where\u7b49\u5b50\u53e5]..;#\u5e38\u7528\u793a\u4f8b1\ninsert into\u3010\u88ab\u63d2\u5165\u8868\u540d\u3011(\u5217\u540d) select (\u5217\u540d) from \u3010table name\u3011[where\u7b49\u5b50\u53e5]..;#\u5e38\u7528\u793a\u4f8b2\n\n#\u5220\u9664\ndelete from \u3010table name\u3011 where \u6761\u4ef6;\ndelete from gc where id = 1; \u793a\u4f8b\n\n#\u4fee\u6539updata\nupdata table_ name set colname = xxx[where\u5b50\u53e5];\nupdata gc set id = 1 where ip = 3;#\u793a\u4f8b1\nupdata gc set id = 1 , account = 1 where ip = 3; #\u793a\u4f8b2\n\n### \u9488\u5bf9\u884c\u7684\u8fdb\u9636\u67e5\u627e\u529f\u80fd\u3010\u7b5b\u9009\u3001\u6392\u5e8f\u3011\n\n#\u6307\u5b9a\u67e5\u627ein\nselect * from tablename where colname in \uff08value1,value12..\uff09;\nselect * from gc where id in ('1','2');#\u793a\u4f8b1\n\nselect * from tablename where colname in \uff08select from tablename\uff09;\nselect * from gc where id in (select id from book where ip <4);\u793a\u4f8b\n\n#\u7b5b\u9009\u3010\u591a\u91cd\u7b5b\u9009\u7528and\u548cor\u3011\nselect * from table_ name where colname is null ;\nselect * from table name where colname is not null ;\n\nselect * from table name where colname like abc ;#\u6a21\u7cca\u5339\u914d1\nselect * from table name where colname not like abc ;#\u6a21\u7cca\u5339\u914d2\n\u6ce8\u91ca\uff1aabc \u56fa\u5b9a\u52a0\u5355\u5f15\u53f7\u5339\u914d\u683c\u5f0f\u5206\u4e3a '%abc'\u3001'abc%'\u3001'%abc%'\nselect * from table name where colname not like '%abc';#\u793a\u4f8b1\uff0c\u6a21\u7cca\u5339\u914d\u4ee5abc\u7ed3\u5c3e\u7684\u6570\u636e\n\nselect * from tablename where colname \u3010\u8fd0\u7b97\u7b26\u3011\u503c ;#\u6ce8\u610f\uff0csql\u7684\u7b49\u4e8e\u5c31\u662f\u5355\u4e2a=\nselect * from tablename where colname = '1' ;#\u793a\u4f8b\uff0c\u5b57\u7b26\u4e32\u9700\u8981\u52a0''\nselect * from tablename where colname != 1 ;#\u793a\u4f8b1\nselect * from tablename where colname between 1 and 3;#\u793a\u4f8b2\uff0ccolname\u503c\u57281\u548c3\u4e4b\u95f4\nselect * from tablename where colname not between 1 and 3;#\u793a\u4f8b3\uff0ccolname\u503c\u4e0d\u57281\u548c3\u4e4b\u95f4\n\n#\u591a\u91cd\u7b5b\u9009\nselect * from table_ name where colname is null and colname is not null or colname = '1' ;\n\n#\u53bb\u91cd\u7b5b\u9009\nselect distinct colnamel from tablename;#\u67e5\u8be2\u8868\u7684\u6307\u5b9a\u5217\u3010\u53bb\u91cd\u3011\nselect distinct colnamel,colname2 from tablename;#\u67e5\u8be2\u8868\u7684\u6307\u5b9a\u5217\u3010\u53bb\u91cd\u3011\n\n#\u622a\u53d6\u3010\u6a2a\u5411\u3011\nselect * from table_ name [where\u5b50\u53e5] [order\u5b50\u53e5] limit [offset,] colcount;\nselect * from table_ name order by id limit 0,2; #\u793a\u4f8b1\nselect * from table_ name order by id limit 2; # \u793a\u4f8b2\u7b49\u4ef7\u4e8e\u793a\u4f8b1\nselect * from table_ name order by id limit 10,2; # \u793a\u4f8b3\uff0c\u622a\u53d611\u300112\u884c\u7684\u6570\u636e\n\n# \u6392\u5e8f\u3010\u9ed8\u8ba4asc\u5347\u5e8f\u3011\nselect * from table_ name [where \u5b50\u53e5] order by col_name [asc/desc]#1.\u6309\u5355\u4e00\u5217\u540d\u6392\u5e8f\nselect * from table_name [where \u5b50\u53e5] order by col_name [asc/desc], col_name2[asc/desc]#2.\u6309\u591a\u5217\u6392\u5e8f\n\n#\u7b5b\u9009+\u6392\u5e8f\nselect * from table_ name where colname is null order by col_name [asc/desc],col_name2[asc/desc]\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u8865\u5145\uff1awindows \u4e0b python \u8fde\u63a5 linux \u7684 mysql \u5e76\u4e14\u4f7f\u7528"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"linux \u4e0a\u6210\u529f\u5b89\u88c5 mysql"}),"\n",(0,t.jsx)(n.li,{children:"\u6388\u6743 mysql \u53ef\u4ee5\u8fdc\u7a0b\u8bbf\u95ee\n\u5f00\u653e\u9632\u706b\u5899\u7684\u7aef\u53e3\u53f7"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:"showLineNumbers",children:"GRANT ALL PRIVILEGES ON *.* TO \u3010\u8d26\u53f7\u3011@'%'  IDENTIFIED BY \u2018\u3010\u5bc6\u7801\u3011\u2019  WITH GRANT OPTION;\nFLUSH   PRIVILEGES;\n\n#\u5f00\u59cb\u7f16\u5199\u4ee3\u7801\u6d4b\u8bd5\n\nimport Mysqldb as mysql\nconn=mysql.connect(host=\u2019192.168.142.111\u2019,user=\u2019root\u2019,passwd=\u20191714****\u2019,db=\u2019dg\u2019)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"postgresql",children:"PostgreSQL"}),"\n",(0,t.jsx)(n.h3,{id:"\u57fa\u672c\u7528\u6cd5",children:"\u57fa\u672c\u7528\u6cd5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:"showLineNumbers",children:"# \u968f\u673a\u62bd\u53d6\u6307\u5b9a\u5217N\u6761\u6570\u636e\n# \u6570\u636e\u5e93\uff1awebs\n# \u5217\u540d\uff1aRUN\n# \u6570\u636e\u91cf\uff1a1\u6761\nSELECT * FROM webs WHERE status='RUN' order by random() limit 1;\n\n# \u62bd\u53d6\u6307\u5b9a\u6761\u4ef6\u6570\u636e\u5e76\u6392\u5e8f\n# \u6570\u636e\u5e93\uff1awebs\n# \u6761\u4ef6\uff1aindexs>0\nSELECT * FROM webs WHERE indexs>0 ORDER BY indexs DESC;\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u4ee3\u7801\u5b9e\u4f8b",children:"\u4ee3\u7801\u5b9e\u4f8b"}),"\n",(0,t.jsx)(n.p,{children:"\u521b\u5efa\u914d\u7f6e\u6587\u4ef6 database.ini\uff0c\u5185\u5bb9\u5982\u4e0b"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:"showLineNumbers",children:"[postgresql]\nhost=192.168.0.1 # \u586b\u5199\u81ea\u5df1\u7684\u6570\u636e\u5e93\u516c\u7f51\u6216\u5185\u7f51\u5730\u5740\ndatabase=ttt\nuser=ttt\npassword=tttttttttttt\n\n[postgresqltest]\nhost=192.168.0.1 # \u586b\u5199\u81ea\u5df1\u7684\u6570\u636e\u5e93\u516c\u7f51\u6216\u5185\u7f51\u5730\u5740\ndatabase=webs\nuser=webs\npassword=webswebswebs\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u6587\u4ef6 database.py\uff0c\u5185\u5bb9\u5982\u4e0b"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",metastring:"showLineNumbers",children:'import psycopg2\nfrom configparser import ConfigParser\n\n# \u8bfb\u53d6\u914d\u7f6e\u6587\u4ef6\u4fe1\u606f\ndef config(filename="database.ini", section="postgresql"):\n    # create a parser\n    parser = ConfigParser()\n    # read config file\n    parser.read(filename)\n    # get section, default to postgresql\n    db = {}\n    if parser.has_section(section):\n        params = parser.items(section)\n        for param in params:\n            db[param[0]] = param[1]\n    else:\n        raise Exception(\n            "Section {0} not found in the {1} file".format(section, filename)\n        )\n\n    return db\n\n# \u67e5\u8be2\u6570\u636e\u5e93\ndef connect(sql, section="postgresql"):\n    """Connect to the PostgreSQL database server"""\n    conn = None\n    try:\n        params = config(section=section)\n        conn = psycopg2.connect(**params)\n        cur = conn.cursor()\n        cur.execute(sql)\n        db_version = cur.fetchall()\n        cur.close()\n        return db_version\n    except (Exception, psycopg2.DatabaseError) as error:\n        print(error)\n    finally:\n        if conn is not None:\n            conn.close()\n            print("Database connection closed.")\n\n# \u4fee\u6539\u6570\u636e\u5e93\ndef connect_update(sql, section="postgresql"):\n    """Connect to the PostgreSQL database server"""\n    conn = None\n    try:\n        params = config(section=section)\n        conn = psycopg2.connect(**params)\n        cur = conn.cursor()\n        cur.execute(sql)\n        conn.commit()\n        cur.close()\n        print("sucess")\n    except (Exception, psycopg2.DatabaseError) as error:\n        print(error)\n    finally:\n        if conn is not None:\n            conn.close()\n            print("Database connection closed.")\n'})})]})}function d(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(m,{...e})}):m(e)}},11151:(e,n,a)=>{a.d(n,{Z:()=>o,a:()=>r});var t=a(67294);const s={},l=t.createContext(s);function r(e){const n=t.useContext(l);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);