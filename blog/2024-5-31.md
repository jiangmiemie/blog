---
slug: /家用代边缘计算设备
title: 家用边缘计算设备
date: 2024-5-31
authors: jiangmiemie
tags: [smarthome]
keywords: [smarthome]
description: 记录个人如何低成本的实现家用家用边缘计算设备
---

如果你想在家里有个边缘计算设备，你可以考虑[thinker edge R](https://tinker-board.asus.com/product/tinker-edge-r.html) 它是华硕的一款单片机产品,适用于 AI 应用的单板计算机。

- 支持 Linux（Debian 9 ，最新版支持 Debian 10）和安卓系统（9）。
- 处理器 ARM 架构最多 6 核。
- 内存 DDR4 最大 4GB（系统）+2GB（NPU）。
- 存储 16GB+SD 卡插槽
- 带有 HDMI*1、typeC*1、USB3.0\*3、以太网、音频接口、GPIO 接口、摄像头接口、蓝牙、WiFi、GPS、NFC、蜂窝网络、摄像头接口等接口。
- TIP：SIM 卡与 SD 卡的插槽在背面，同时背面绘制有此主板的具体型号，如：`Thinker Edge R 1.02`，下载配套的软件或驱动时，可认准此型号。

## 烧录系统

### 下载镜像与烧录工具

查看[下载文档](https://tinker-board.asus.com)

Get Tinker Edge R ROM Image 与 Get Edge R Flash tool (Windows GUI version)是一个网址下载，这里华硕没有把他们分开，下载的时候注意看后缀，如果含有`Debian`则说明这是 Linux 系统的镜像，如果是`Flash Tool (GUI)`，说明这是刷机工具，同理，如果是 `Android`则说明这是安卓系统的镜像。

这里我们选择最早的`Tinker Edge R Flash Tool (GUI) V1.0.0`镜像选择与主板号对应的 1.04，即`Tinker_Edge_R-Debian-Stretch-V1.0.4`

把对应版本的压缩包（我的是 1.04）`Tinker_Edge_R-Debian-Stretch-V1.0.4.zip`解压，阅读其中的 readme.txt 根据提示解压 tools 文件夹下的`DriverAssitant_v4.91.zip`，安装驱动即可。驱动目前是支持到 Windows 10，实测发现 win11 也可以用。

### 进入刷机模式注意事项

- 使用指定的 typeC 连接线连接电脑与单片机（此时主板有弱电流）
- 通过跳针短接重启键（此时主板有弱电流）
- 拔出跳针，连接电源，等待电脑识别设备。（连接电源后主板有强电流）
- 图形化的刷机工具刷机会提示成功，此时连接显示器即可获得新电脑，用终端运行桌面的配置文件，会安装华硕推荐的一些软件包。
- TIP：Flash 工具+命令行（Windows、Linux）和图形化的刷机工具是 AB 方案，任选一种。不是先后顺序。

### 其他注意事项

- 烧录时不使用指定的连接线可能无法识别设备。
- 如果烧录了非指定系统，该单片机可能烧毁或无法工作，可以使用跳针来恢复刷机模式检测看能否继续使用。
- 工作温度：0℃ ~ 60℃，冬季请避免在室外使用，可能和 ipad 一样停止工作。

### 镜像格式的区别

- \*.iso 是一种光盘的存档文件，被设计用于光盘存档，符合 ISO 9660 等光盘规范；
- \*.img 是一种文件归档格式，被设计用于数字存储、传输、以及整片 磁盘/光盘 内容的复制；
- _.img 兼容 _.iso （_.iso 是_.img 的特例）

## 基础配置

### 1.更新源文件

中国区的使用者推荐使用阿里云的镜像源，源其实就是指向一个仓库的网址。

1.备份后编辑源

```bash
sudo mv /etc/apt/sources.list /etc/apt/sources.list.bak
sudo vim /etc/apt/sources.list

```

vim 内容如下，`a`是进入编辑模式、`esc`是退出编辑模式，`:`是指令模式，`wq!`是保存指令

完整的操作就是：

- `a`是进入编辑模式  
  按下后左下角会出现`--插入--`或者`--insert--`提示当前为编辑模式

- 删除旧内容，粘贴新内容。

- `esc`退出编辑模式  
  按下后左下角提示消失

- `:wq!`输入完毕后按`回车键`确认  
  输入过程中左下角会出现输入的内容

不同版本的 debian 系统指向的源不同，请根据你自己的系统选择合适的镜像。例如搜索：debian10 镜像源

```bash
# debian10镜像源
deb http://mirrors.aliyun.com/debian/ buster main non-free contrib
deb http://mirrors.aliyun.com/debian/ buster-updates main non-free contrib
deb http://mirrors.aliyun.com/debian-security/ buster/updates main non-free contrib
deb-src http://mirrors.aliyun.com/debian/ buster main non-free contrib
deb-src http://mirrors.aliyun.com/debian/ buster-updates main non-free contrib
deb-src http://mirrors.aliyun.com/debian-security/ buster/updates main non-free contrib
```

2.更新并下载源

```bash
sudo apt-get update

```

参考链接：
https://www.cnblogs.com/liqi175/p/16788629.html

### 2.打开 pwm 接口

编辑配置文件，找到 pwm1 所在行，删除行首的#号，修改 off 为 on

```bash
sudo vim /boot/config.txt

```

修改前：`#pwm1=off`

修改后:`pwm1=on`

进入、保存等对应快捷键参考上一步

完成后重启

```bash
sudo reboot

```

### 3.安装中文并配置输入法

1.安装并配置 locales 软件包

```bash
sudo apt-get install locales
sudo dpkg-reconfigure locales

```

参考下方说明在界面中钩选上 `zh_CN.UTF-8 UTF-8`并确认

- 按下 Pg-Up 和 Pg-Down 可以快速滚动列表。
- `↑↓`上下移动光标
- `空格键`是选择
- `回车`代表确认并进入下一步

系统默认的区域选择刚刚下载的 `zh_CN.UTF-8 UTF-8`，回车 OK

2.安装输入法
安装 im-config 框架、开源输入法 fcitx 框架(fcitx)与输入法,这步会提示下载一些资源，按 y 确认。

```bash
sudo apt-get install im-config fcitx fcitx-pinyin fcitx-ui-classic fcitx-config-gtk

```

3.进入输入法配置界面

```bash
sudo apt --fix-broken install
sudo fcitx-configtool
sudo reboot

```

- 点击上方选项框`全局配置`
- 点击左下角`显示高级选项`
- 点击上方选项框`程序`
- 在`在窗口间共享状态`中，选择`所有`
- 在`默认输入法状态`中，选择选择`激活`。

:::tip
重启后若提示是否保留旧名称，选择不再提示，保留旧名称。
:::

```bash
sudo reboot

```

4.切换输入法方式

输入法被唤醒时(**Ctrl + space**)，右键菜单中选择输入法。

### 4.安装 Python 包

安装对应的模块库，下面的三行代码分别是：

- 创建一个模块库列表文件
- 更新 pip
- 安装模块库

```bash showLineNumbers
echo -e "setuptools\nopencv-python\nopencv-contrib-python\nimageio\nscipy\npillow\nnumpy\nmatplotlib\npandas\nscikit-learn\ntorch\ntensorflow\ntensorflow-io==0.24\nCython" > requirements.txt
sudo python3 -m pip install  -i http://mirrors.aliyun.com/pypi/simple --upgrade pip
sudo python3 -m pip install -i http://mirrors.aliyun.com/pypi/simple -r requirements.txt

```

如果报网络相关的错误可以替换为下面的代码

```bash showLineNumbers
echo -e "setuptools\nopencv-python\nopencv-contrib-python\nimageio\nscipy\npillow\nnumpy\nmatplotlib\npandas\nscikit-learn\ntorch\ntensorflow\ntensorflow-io==0.24\nCython" > requirements.txt
sudo python3 -m pip install  -i https://pypi.tuna.tsinghua.edu.cn/simple --upgrade pip
sudo python3 -m pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt

```

其中`requirements.txt`是你自己的模块库列表。在上面的示例中`requirements.txt`内容如下：

```title="requirements.txt"
setuptools
opencv-python
opencv-contrib-python
imageio
scipy
pillow
numpy
matplotlib
pandas
scikit-learn
torch
tensorflow
tensorflow-io==0.24
Cython
```

如需安装高版本 Python 用于机器学习，可以执行：

:::tip
可以提前下载好 Python-3.12.0.tgz 放在 U 盘中,也可以通过`scp`命令传输。
:::

```bash showLineNumbers
tar xzf Python-3.12.0.tgz
cd Python-3.12.0
./configure --enable-optimizations
make altinstall

```
